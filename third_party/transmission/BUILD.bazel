load("@rules_foreign_cc//foreign_cc:defs.bzl", "cmake")

package(default_visibility = ["//visibility:public"])

cmake(
    name = "transmission",
    lib_source = "@transmission//:all",
    generate_args = [
        "-DCMAKE_BUILD_TYPE=Release",
        "-DENABLE_CLI=ON",
        "-DENABLE_DAEMON=ON",
        "-DENABLE_GTK=OFF",
        "-DENABLE_MAC=OFF",
        "-DENABLE_QT=OFF",
        "-DENABLE_TESTS=OFF",
        "-DENABLE_UTILS=ON",
        "-DREBUILD_WEB=OFF",
        "-DWITH_CRYPTO=openssl",
    ],
    build_args = [
        "--verbose",
        "--parallel 8",
    ],
    deps = [
        #"@libdeflate//:deflate",
        "@curl//:curl",
        "@openssl//:ssl",
        #"@libevent//:event_core",
        #"@libevent//:event_extra",
        #"@libevent//:event_openssl",
        #"//third_party/libnatpmp",
        #"@libdht//:libdht",
    ],
)
